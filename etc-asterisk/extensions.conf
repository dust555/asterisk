[inside]
exten => 100,1,NoOp(Calling user 1)
same => n,Dial(SIP/user1)
same => n,Hangup()

exten => 200,1,NoOp(Calling user 2)
same => n,Dial(SIP/user2)
same => n,Hangup()

exten => 300,1,NoOp(Calling user 3)
same => n,Dial(SIP/user3)
same => n,Hangup()

exten => 400,1,NoOp(Calling cisco 1)
same => n,Dial(SIP/cisco1)
same => n,Hangup()

exten => 500,1,NoOp(Calling cisco 2)
same => n,Dial(SIP/cisco2)
same => n,Hangup()

exten => _0x!,1,NoOp(External Call to ${EXTEN})
same => n,GoTo(external,${EXTEN:1},1)

exten => 1,1,NoOp(Dialing 1)
same => n,Dial(SIP/user1)
same => n,Hangup()

[external]
exten => _x!,1,NoOp(Calling ${EXTEN})
same => n,Dial(SIP/weepee/${EXTEN})

;[messaging]
;exten => _.,1,NoOp(SMS receiving dialplan invoked)
;exten => _.,n,NoOp(To ${MESSAGE(to)})
;exten => _.,n,NoOp(From ${MESSAGE(from)})
;exten => _.,n,NoOp(Body ${MESSAGE(body)})
;exten => _.,n,AGI(chatplan.php,${MESSAGE(from)})
;exten => _.,n,MessageSend(${ACTUALTOS},${MESSAGE(from)})
;exten => _.,n,NoOp(Send status is ${MESSAGE_SEND_STATUS})
;exten => _.,n,GotoIf($["${MESSAGE_SEND_STATUS}" != "SUCCESS"]?sendfailedmsg)
;exten => _.,n,Hangup()
;
; Handle failed messaging
;exten => _.,n(sendfailedmsg),NoOp(Sending error to user)
;exten => _.,n,Set(SRC=${MESSAGE(from)})
;exten => _.,n,Set(DST=${MESSAGE(to)})
;exten => _.,n,Set(MSG=${MESSAGE(body)}) 
;exten => _.,n,Set(MESSAGE(body)="[${STRFTIME(${EPOCH},,%d%m%Y-%H:%M:%S)}] Your message to ${EXTEN} has failed. Sending when available")
;exten => _.,n,Set(ME_1=${CUT(MESSAGE(from),<,2)})
;exten => _.,n,Set(ACTUALFROM=${CUT(ME_1,@,1)})
;exten => _.,n,MessageSend(${ACTUALFROM},ServiceCenter)
;exten => _.,n,GotoIf($["${INQUEUE}" != "1"]?startq)
;exten => _.,n,Hangup()
;
;exten => _.,n(startq),NoOp(Queueing messaging for offline)
;exten => _.,n,Set(MSGTIME=${STRFTIME(${EPOCH},,%d%m%Y-%H:%M:%S)})
;exten => _.,n,SYSTEM(/var/lib/asterisk/agi-bin/astqueue.sh –SRC ‘${SRC}’ –DST ‘${DST}’ –MSG ‘${MSG}’)
;exten => _.,n,Hangup()[app-fakeanswer]
;exten => _.,1,NoCDR
;exten => _.,n,Set(DESTDEV=${EXTEN})
;exten => _.,n,Set(THISDEVSTATE=${DEVICE_STATE(SIP/${DESTDEV})})
;exten => _.,n,GotoIf($["${THISDEVSTATE}" = "UNAVAILABLE"]?hang)
;exten => _.,n,GotoIf($["${THISDEVSTATE}" = "UNKNOWN"]?hang)
;exten => _.,n,Answer
;exten => _.,n,Hangup()
;exten => _.,n(hang),Hangup()
